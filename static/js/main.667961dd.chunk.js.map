{"version":3,"sources":["BookTile/index.js","App.js","useBooksSearch.js","index.js"],"names":["BookTile","id","title","authorName","elementRef","style","minHeight","ref","className","src","App","useState","query","setQuery","pageNumber","setPageNumber","cancel","books","setBooks","loading","setLoading","error","setError","hasMore","setHasMore","useEffect","axios","method","url","params","q","page","cancelToken","CancelToken","c","then","response","prevBooks","Set","data","docs","length","catch","err","isCancel","useBooksSearch","observer","useRef","lastElementRef","useCallback","node","current","disconnect","IntersectionObserver","entries","isIntersecting","prevPageNumber","observe","Container","fluid","Navbar","sticky","expand","variant","bg","Brand","href","height","Form","Group","Control","size","type","placeholder","value","onChange","e","target","Text","Row","map","book","index","Col","xs","sm","md","edition_key","author_name","Math","random","Array","fill","Card","Body","ReactDOM","render","StrictMode","document","getElementById"],"mappings":"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","file":"static/js/main.667961dd.chunk.js","sourcesContent":["import React from \"react\";\nimport './style.scss';\n\nexport default function BookTile({id, title, authorName, elementRef}) {\n\treturn (\n\t\t<figure style={{ minHeight: '300px' }} ref={elementRef && elementRef} className=\"bookTile\">\n\t\t\t<img src={id ? `http://covers.openlibrary.org/b/olid/${id}-L.jpg` : 'https://placeimg.com/300/300/book'}/>\n\t\t\t<figcaption>\n\t\t\t\t<h5>{authorName}</h5>\n\t\t\t\t<h4>{title}</h4>\n\t\t\t</figcaption>\n\t\t</figure>\n\t)\n}","import useBooksSearch from './useBooksSearch';\nimport {useState, useRef, useCallback } from 'react';\nimport Skeleton from 'react-loading-skeleton';\nimport {Card,  Row, Col, Container, Form, Navbar} from 'react-bootstrap';\nimport './app.scss';\nimport BookTile from \"./BookTile\";\n\n\nexport default function App() {\n\tconst [query, setQuery] = useState('');\n\tconst [pageNumber,setPageNumber] = useState('')\n\tconst { books,loading,error, hasMore } = useBooksSearch(query,pageNumber);\n\tconst observer = useRef();\n\tconst lastElementRef = useCallback(node => {\n\t\t if(loading) return;\n\t\t if(observer.current) observer.current.disconnect();\n\t\t observer.current = new IntersectionObserver(entries => {\n\t\t \t if(entries[0].isIntersecting && hasMore) {\n\t\t \t \tsetPageNumber(prevPageNumber => prevPageNumber + 1);\n\t\t     }\n\t\t })\n\t\t if(node) observer.current.observe(node);\n\t}, [loading,hasMore])\n\n\n\tfunction onTextInputChange(e) {\n        setQuery(e.target.value);\n        setPageNumber(1)\n\t}\n\n\treturn (\n\t\t<>\n\t\t\t<Container fluid className=\"bg-warning p-0\">\n\t\t\t\t<Navbar sticky=\"top\" expand=\"lg\" variant=\"dark\" bg=\"dark\">\n\t\t\t\t\t<Navbar.Brand href=\"/\">BOOK SHOP</Navbar.Brand>\n\t\t\t\t</Navbar>\n\t\t\t</Container>\n\t\t\t<Container fluid className=\"bg-warning\" style={{ height: '250px' }}>\n\t\t\t\t<Container className=\"p-5\">\n\t\t\t\t\t<Form>\n\t\t\t\t\t\t<Form.Group>\n\t\t\t\t\t\t\t<Form.Control className=\"rounded\"  size=\"lg\" type=\"text\" placeholder=\"Search Books\" value={query} onChange={onTextInputChange}/>\n\t\t\t\t\t\t\t<Form.Text className=\"text-muted\">\n\t\t\t\t\t\t\t\tStart typing to see your favorite books.\n\t\t\t\t\t\t\t</Form.Text>\n\t\t\t\t\t\t</Form.Group>\n\t\t\t\t\t</Form>\n\t\t\t\t</Container>\n\t\t\t</Container>\n\t\t\t<Container fluid className=\"bg-info\" style={{ minHeight: '100vh' }}>\n\t\t\t\t<Container className=\"p-5\">\n\t\t\t\t\t<Row>\n\t\t\t\t\t\t{books && books.map((book,index) => {\n\t\t\t\t\t\t\tif(index === books.length - 1) {\n\t\t\t\t\t\t\t\treturn (\n\t\t\t\t\t\t\t\t\t<Col className=\"p-2\" xs={12} sm={6} md={4} ref={lastElementRef} key={`book-${Math.random()}`}>\n\t\t\t\t\t\t\t\t\t\t<BookTile\n\t\t\t\t\t\t\t\t\t\t\tid={book.edition_key && book.edition_key[0]}\n\t\t\t\t\t\t\t\t\t\t\ttitle={book.title}\n\t\t\t\t\t\t\t\t\t\t\tauthorName={book.author_name && book.author_name[0]}\n\t\t\t\t\t\t\t\t\t\t\telementRef={lastElementRef()} />\n\t\t\t\t\t\t\t\t\t</Col>\n\t\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\treturn <Col className=\"p-2\" xs={12} sm={6} md={4} key={`book-${Math.random()}`}>\n\t\t\t\t\t\t\t\t\t<BookTile\n\t\t\t\t\t\t\t\t\t\tid={book.edition_key && book.edition_key[0]}\n\t\t\t\t\t\t\t\t\t\tauthorName={book.author_name && book.author_name[0]}\n\t\t\t\t\t\t\t\t\t\ttitle={book.title} />\n\t\t\t\t\t\t\t\t</Col>\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t})}\n\t\t\t\t\t</Row>\n\t\t\t\t\t{loading && <Row>\n\t\t\t\t\t\t{Array(3).fill(\"\").map(index => {\n\t\t\t\t\t\t\treturn (\n\t\t\t\t\t\t\t\t<Col className=\"p-2\" sm={12} md={4} ref={lastElementRef} key={`skeleton-${Math.random()}`}>\n\t\t\t\t\t\t\t\t\t<Card>\n\t\t\t\t\t\t\t\t\t\t<Skeleton height={150} />\n\t\t\t\t\t\t\t\t\t\t<Card.Body>\n\t\t\t\t\t\t\t\t\t\t\t<Skeleton/>\n\t\t\t\t\t\t\t\t\t\t</Card.Body>\n\t\t\t\t\t\t\t\t\t</Card>\n\t\t\t\t\t\t\t\t</Col>\n\t\t\t\t\t\t\t)\n\t\t\t\t\t\t})}\n\t\t\t\t\t</Row>}\n\t\t\t\t\t{error && <p>Error</p>}\n\t\t\t\t</Container>\n\t\t\t</Container>\n\t\t</>\n\t);\n}\n","import { useEffect, useState } from 'react';\nimport axios from 'axios';\n\nconst URL = 'https://openlibrary.org/search.json';\n\nexport default function useBooksSearch (query,pageNumber) {\n\tconst [books,setBooks] = useState([]);\n\tconst [loading, setLoading] = useState(false);\n\tconst [error, setError] = useState(false);\n\tconst [hasMore,setHasMore] = useState(true);\n\tlet cancel\n\n\tuseEffect(() => {\n\t\tsetBooks([])\n\t},[query])\n\n\tuseEffect(() => {\n\t\tsetLoading(true);\n\t\tsetError(false);\n\t\taxios({\n\t\t\tmethod: 'GET',\n\t\t\turl: URL,\n\t\t\tparams: {q: query, page: pageNumber},\n\t\t\tcancelToken: new axios.CancelToken(c => cancel = c)\n\t\t}).then(response => {\n\t\t\t//console.log(response.data.docs);\n\t\t\tsetLoading(false);\n\t\t\tsetBooks((prevBooks) => {\n\t\t\t\treturn [...new Set([...prevBooks, ...response.data.docs])]\n\t\t\t})\n\t\t\tsetHasMore(response.data.docs.length > 0)\n\t\t}).catch(err => {\n\t\t\tif(axios.isCancel(err)) return\n\t\t\tsetError(true)\n\t\t\tsetLoading(false);\n\t\t})\n\t\treturn () => cancel();\n\t},[query,pageNumber])\n\n\treturn {\n\t\tbooks,\n\t\tloading,\n\t\terror,\n\t\thasMore\n\t};\n}","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport App from './App';\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n"],"sourceRoot":""}