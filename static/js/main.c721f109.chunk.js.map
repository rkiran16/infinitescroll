{"version":3,"sources":["BookTile/index.js","App.js","useBooksSearch.js","index.js"],"names":["BookTile","id","title","authorName","elementRef","style","minHeight","ref","className","console","log","src","App","useState","query","setQuery","pageNumber","setPageNumber","cancel","books","setBooks","loading","setLoading","error","setError","hasMore","setHasMore","useEffect","axios","method","url","params","q","page","cancelToken","CancelToken","c","then","response","data","docs","prevBooks","Set","length","catch","err","isCancel","useBooksSearch","observer","useRef","lastElementRef","useCallback","node","current","disconnect","IntersectionObserver","entries","isIntersecting","prevPageNumber","observe","Container","fluid","Form","Group","Control","size","type","placeholder","value","onChange","e","target","Row","map","book","index","Col","xs","sm","md","edition_key","author_name","Math","random","Array","fill","Card","height","Body","ReactDOM","render","StrictMode","document","getElementById"],"mappings":"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","file":"static/js/main.c721f109.chunk.js","sourcesContent":["import React from \"react\";\nimport './style.scss';\n\nexport default function BookTile({id, title, authorName, elementRef}) {\n\treturn (\n\t\t<figure style={{ minHeight: '300px' }} ref={elementRef && elementRef} className=\"bookTile\">\n\t\t\t{console.log(id)}\n\t\t\t<img src={id ? `http://covers.openlibrary.org/b/olid/${id}-L.jpg` : 'https://placeimg.com/300/300/book'}/>\n\t\t\t<figcaption>\n\t\t\t\t<h5>{authorName}</h5>\n\t\t\t\t<h4>{title}</h4>\n\t\t\t</figcaption>\n\t\t</figure>\n\t)\n}","import useBooksSearch from './useBooksSearch';\nimport {useState, useRef, useCallback } from 'react';\nimport Skeleton from 'react-loading-skeleton';\nimport {Card,  Row, Col, Container, Form} from 'react-bootstrap';\nimport './app.scss';\nimport BookTile from \"./BookTile\";\n\n\nexport default function App() {\n\tconst [query, setQuery] = useState('');\n\tconst [pageNumber,setPageNumber] = useState('')\n\tconst { books,loading,error, hasMore } = useBooksSearch(query,pageNumber);\n\tconst observer = useRef();\n\tconst lastElementRef = useCallback(node => {\n\t\t if(loading) return;\n\t\t if(observer.current) observer.current.disconnect();\n\t\t observer.current = new IntersectionObserver(entries => {\n\t\t \t if(entries[0].isIntersecting && hasMore) {\n\t\t \t \tsetPageNumber(prevPageNumber => prevPageNumber + 1);\n\t\t     }\n\t\t })\n\t\t if(node) observer.current.observe(node);\n\t}, [loading,hasMore])\n\n\n\tfunction onTextInputChange(e) {\n        setQuery(e.target.value);\n        setPageNumber(1)\n\t}\n\n\treturn (\n\t\t<>\n\t\t\t<Container fluid className=\"bg-warning\">\n\t\t\t\t<Container className=\"p-5\">\n\t\t\t\t\t<Form>\n\t\t\t\t\t\t<Form.Group>\n\t\t\t\t\t\t\t<Form.Control className=\"rounded\"  size=\"lg\" type=\"text\" placeholder=\"Search Books\" value={query} onChange={onTextInputChange}/>\n\t\t\t\t\t\t</Form.Group>\n\t\t\t\t\t</Form>\n\t\t\t\t</Container>\n\t\t\t</Container>\n\t\t\t<Container fluid className=\"bg-info\" style={{ minHeight: '100vh' }}>\n\t\t\t\t<Container className=\"p-5\">\n\t\t\t\t\t<Row>\n\t\t\t\t\t\t{books && books.map((book,index) => {\n\t\t\t\t\t\t\tif(index === books.length - 1) {\n\t\t\t\t\t\t\t\treturn (\n\t\t\t\t\t\t\t\t\t<Col className=\"p-2\" xs={12} sm={6} md={4} ref={lastElementRef} key={`book-${Math.random()}`}>\n\t\t\t\t\t\t\t\t\t\t<BookTile\n\t\t\t\t\t\t\t\t\t\t\tid={book.edition_key && book.edition_key[0]}\n\t\t\t\t\t\t\t\t\t\t\ttitle={book.title}\n\t\t\t\t\t\t\t\t\t\t\tauthorName={book.author_name && book.author_name[0]}\n\t\t\t\t\t\t\t\t\t\t\telementRef={lastElementRef()} />\n\t\t\t\t\t\t\t\t\t</Col>\n\t\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\treturn <Col className=\"p-2\" xs={12} sm={6} md={4} key={`book-${Math.random()}`}>\n\t\t\t\t\t\t\t\t\t<BookTile\n\t\t\t\t\t\t\t\t\t\tid={book.edition_key && book.edition_key[0]}\n\t\t\t\t\t\t\t\t\t\tauthorName={book.author_name && book.author_name[0]}\n\t\t\t\t\t\t\t\t\t\ttitle={book.title} />\n\t\t\t\t\t\t\t\t</Col>\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t})}\n\t\t\t\t\t</Row>\n\t\t\t\t\t{loading && <Row>\n\t\t\t\t\t\t{Array(3).fill(\"\").map(index => {\n\t\t\t\t\t\t\treturn (\n\t\t\t\t\t\t\t\t<Col className=\"p-2\" sm={12} md={4} ref={lastElementRef} key={`skeleton-${Math.random()}`}>\n\t\t\t\t\t\t\t\t\t<Card>\n\t\t\t\t\t\t\t\t\t\t<Skeleton height={150} />\n\t\t\t\t\t\t\t\t\t\t<Card.Body>\n\t\t\t\t\t\t\t\t\t\t\t<Skeleton/>\n\t\t\t\t\t\t\t\t\t\t</Card.Body>\n\t\t\t\t\t\t\t\t\t</Card>\n\t\t\t\t\t\t\t\t</Col>\n\t\t\t\t\t\t\t)\n\t\t\t\t\t\t})}\n\t\t\t\t\t</Row>}\n\t\t\t\t\t{error && <p>Error</p>}\n\t\t\t\t</Container>\n\t\t\t</Container>\n\t\t</>\n\t);\n}\n","import { useEffect, useState } from 'react';\nimport axios from 'axios';\n\nconst URL = 'http://openlibrary.org/search.json';\n\nexport default function useBooksSearch (query,pageNumber) {\n\tconst [books,setBooks] = useState([]);\n\tconst [loading, setLoading] = useState(false);\n\tconst [error, setError] = useState(false);\n\tconst [hasMore,setHasMore] = useState(true);\n\tlet cancel\n\n\tuseEffect(() => {\n\t\tsetBooks([])\n\t},[query])\n\n\tuseEffect(() => {\n\t\tsetLoading(true);\n\t\tsetError(false);\n\t\taxios({\n\t\t\tmethod: 'GET',\n\t\t\turl: URL,\n\t\t\tparams: {q: query, page: pageNumber},\n\t\t\tcancelToken: new axios.CancelToken(c => cancel = c)\n\t\t}).then(response => {\n\t\t\tconsole.log(response.data.docs);\n\t\t\tsetLoading(false);\n\t\t\tsetBooks((prevBooks) => {\n\t\t\t\treturn [...new Set([...prevBooks, ...response.data.docs])]\n\t\t\t})\n\t\t\tsetHasMore(response.data.docs.length > 0)\n\t\t}).catch(err => {\n\t\t\tif(axios.isCancel(err)) return\n\t\t\tsetError(true)\n\t\t\tsetLoading(false);\n\t\t})\n\t\treturn () => cancel();\n\t},[query,pageNumber])\n\n\treturn {\n\t\tbooks,\n\t\tloading,\n\t\terror,\n\t\thasMore\n\t};\n}","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport App from './App';\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n"],"sourceRoot":""}