{"version":3,"sources":["App.js","useBooksSearch.js","index.js"],"names":["App","useState","query","setQuery","pageNumber","setPageNumber","cancel","books","setBooks","loading","setLoading","error","setError","hasMore","setHasMore","useEffect","axios","method","url","params","q","page","cancelToken","CancelToken","c","then","response","console","log","data","docs","prevBooks","Set","length","catch","err","isCancel","useBooksSearch","observer","useRef","lastElementRef","useCallback","node","current","disconnect","IntersectionObserver","entries","isIntersecting","prevPageNumber","observe","Container","fluid","className","Form","Group","Control","size","type","placeholder","value","onChange","e","target","style","height","Row","map","book","index","Col","sm","md","ref","Card","Img","maxHeight","variant","src","edition_key","ImgOverlay","Body","Title","title","Math","random","Array","fill","ReactDOM","render","StrictMode","document","getElementById"],"mappings":"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","file":"static/js/main.38c6dcc1.chunk.js","sourcesContent":["import useBooksSearch from './useBooksSearch';\nimport {useState, useRef, useCallback } from 'react';\nimport Skeleton from 'react-loading-skeleton';\nimport {Card,  Row, Col, Container, Form} from 'react-bootstrap'\n\n\nexport default function App() {\n\tconst [query, setQuery] = useState('');\n\tconst [pageNumber,setPageNumber] = useState('')\n\tconst { books,loading,error, hasMore } = useBooksSearch(query,pageNumber);\n\tconst observer = useRef();\n\tconst lastElementRef = useCallback(node => {\n\t\t if(loading) return;\n\t\t if(observer.current) observer.current.disconnect();\n\t\t observer.current = new IntersectionObserver(entries => {\n\t\t \t if(entries[0].isIntersecting && hasMore) {\n\t\t \t \tsetPageNumber(prevPageNumber => prevPageNumber + 1);\n\t\t     }\n\t\t })\n\t\t if(node) observer.current.observe(node);\n\t}, [loading,hasMore])\n\n\n\tfunction onTextInputChange(e) {\n        setQuery(e.target.value);\n        setPageNumber(1)\n\t}\n\n\treturn (\n\t\t<>\n\t\t\t<Container fluid className=\"bg-warning\">\n\t\t\t\t<Container className=\"p-5\">\n\t\t\t\t\t<Form>\n\t\t\t\t\t\t<Form.Group>\n\t\t\t\t\t\t\t<Form.Control className=\"rounded\"  size=\"lg\" type=\"text\" placeholder=\"Search Books\" value={query} onChange={onTextInputChange}/>\n\t\t\t\t\t\t</Form.Group>\n\t\t\t\t\t</Form>\n\t\t\t\t</Container>\n\t\t\t</Container>\n\t\t\t<Container fluid className=\"bg-info\" style={{ height: '100vh' }}>\n\t\t\t\t<Container className=\"p-5\">\n\t\t\t\t\t<Row>\n\t\t\t\t\t\t{books && books.map((book,index) => {\n\t\t\t\t\t\t\tif(index === books.length - 1) {\n\t\t\t\t\t\t\t\treturn (\n\t\t\t\t\t\t\t\t\t<Col className=\"p-2\" sm={12} md={4} ref={lastElementRef} key={`book-${Math.random()}`}>\n\t\t\t\t\t\t\t\t\t\t<Card style={{ height: '100%' }}>\n\t\t\t\t\t\t\t\t\t\t\t<Card.Img style={{ maxHeight: '325px' }} className=\"img-fluid\" variant=\"top\" src={`http://covers.openlibrary.org/b/olid/${book.edition_key && book.edition_key[0]}-L.jpg`} />\n\t\t\t\t\t\t\t\t\t\t\t<Card.ImgOverlay>\n\t\t\t\t\t\t\t\t\t\t\t\t<Card.Body>\n\t\t\t\t\t\t\t\t\t\t\t\t\t<Card.Title>{book.title}</Card.Title>\n\t\t\t\t\t\t\t\t\t\t\t\t</Card.Body>\n\t\t\t\t\t\t\t\t\t\t\t</Card.ImgOverlay>\n\t\t\t\t\t\t\t\t\t\t</Card>\n\t\t\t\t\t\t\t\t\t</Col>\n\t\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\treturn <Col className=\"p-2\" sm={12} md={4} key={`book-${Math.random()}`}>\n\t\t\t\t\t\t\t\t\t<Card style={{ height: '100%' }}>\n\t\t\t\t\t\t\t\t\t\t<Card.Img style={{ maxHeight: '325px' }} className=\"img-fluid\" variant=\"top\" src={`http://covers.openlibrary.org/b/olid/${book.edition_key && book.edition_key[0]}-L.jpg`} />\n\t\t\t\t\t\t\t\t\t\t<Card.ImgOverlay>\n\t\t\t\t\t\t\t\t\t\t\t<Card.Body>\n\t\t\t\t\t\t\t\t\t\t\t\t<Card.Title>{book.title}</Card.Title>\n\t\t\t\t\t\t\t\t\t\t\t</Card.Body>\n\t\t\t\t\t\t\t\t\t\t</Card.ImgOverlay>\n\t\t\t\t\t\t\t\t\t</Card>\n\t\t\t\t\t\t\t\t</Col>\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t})}\n\t\t\t\t\t</Row>\n\t\t\t\t\t{loading && <Row>\n\t\t\t\t\t\t{Array(3).fill(\"\").map(index => {\n\t\t\t\t\t\t\treturn (\n\t\t\t\t\t\t\t\t<Col className=\"p-2\" sm={12} md={4} ref={lastElementRef} key={`skeleton-${Math.random()}`}>\n\t\t\t\t\t\t\t\t\t<Card>\n\t\t\t\t\t\t\t\t\t\t<Skeleton height={150} />\n\t\t\t\t\t\t\t\t\t\t<Card.Body>\n\t\t\t\t\t\t\t\t\t\t\t<Skeleton/>\n\t\t\t\t\t\t\t\t\t\t</Card.Body>\n\t\t\t\t\t\t\t\t\t</Card>\n\t\t\t\t\t\t\t\t</Col>\n\t\t\t\t\t\t\t)\n\t\t\t\t\t\t})}\n\t\t\t\t\t</Row>}\n\t\t\t\t\t{error && <p>Error</p>}\n\t\t\t\t</Container>\n\t\t\t</Container>\n\t\t</>\n\t);\n}\n","import { useEffect, useState } from 'react';\nimport axios from 'axios';\n\nconst URL = 'https://openlibrary.org/search.json';\n\nexport default function useBooksSearch (query,pageNumber) {\n\tconst [books,setBooks] = useState([]);\n\tconst [loading, setLoading] = useState(false);\n\tconst [error, setError] = useState(false);\n\tconst [hasMore,setHasMore] = useState(true);\n\tlet cancel\n\n\tuseEffect(() => {\n\t\tsetBooks([])\n\t},[query])\n\n\tuseEffect(() => {\n\t\tsetLoading(true);\n\t\tsetError(false);\n\t\taxios({\n\t\t\tmethod: 'GET',\n\t\t\turl: URL,\n\t\t\tparams: {q: query, page: pageNumber},\n\t\t\tcancelToken: new axios.CancelToken(c => cancel = c)\n\t\t}).then(response => {\n\t\t\tconsole.log(response.data.docs);\n\t\t\tsetLoading(false);\n\t\t\tsetBooks((prevBooks) => {\n\t\t\t\treturn [...new Set([...prevBooks, ...response.data.docs])]\n\t\t\t})\n\t\t\tsetHasMore(response.data.docs.length > 0)\n\t\t}).catch(err => {\n\t\t\tif(axios.isCancel(err)) return\n\t\t\tsetError(true)\n\t\t\tsetLoading(false);\n\t\t})\n\t\treturn () => cancel();\n\t},[query,pageNumber])\n\n\treturn {\n\t\tbooks,\n\t\tloading,\n\t\terror,\n\t\thasMore\n\t};\n}","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport App from './App';\nimport 'bootstrap/dist/css/bootstrap.min.css';\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n"],"sourceRoot":""}