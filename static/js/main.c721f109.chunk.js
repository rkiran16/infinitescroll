(this.webpackJsonpinfinitescroll=this.webpackJsonpinfinitescroll||[]).push([[0],{54:function(e,t,c){},55:function(e,t,c){},61:function(e,t,c){"use strict";c.r(t);var n=c(5),a=c(0),r=c.n(a),s=c(28),o=c.n(s),i=c(8),j=c(13),l=c(11),b=c.n(l);var u=c(16),d=c.n(u),h=c(63),O=c(65),m=c(64),f=c(29),x=c(66);c(54),c(55);function p(e){var t=e.id,c=e.title,a=e.authorName,r=e.elementRef;return Object(n.jsxs)("figure",{style:{minHeight:"300px"},ref:r&&r,className:"bookTile",children:[console.log(t),Object(n.jsx)("img",{src:t?"http://covers.openlibrary.org/b/olid/".concat(t,"-L.jpg"):"https://placeimg.com/300/300/book"}),Object(n.jsxs)("figcaption",{children:[Object(n.jsx)("h5",{children:a}),Object(n.jsx)("h4",{children:c})]})]})}function g(){var e=Object(a.useState)(""),t=Object(i.a)(e,2),c=t[0],r=t[1],s=Object(a.useState)(""),o=Object(i.a)(s,2),l=o[0],u=o[1],g=function(e,t){var c,n=Object(a.useState)([]),r=Object(i.a)(n,2),s=r[0],o=r[1],l=Object(a.useState)(!1),u=Object(i.a)(l,2),d=u[0],h=u[1],O=Object(a.useState)(!1),m=Object(i.a)(O,2),f=m[0],x=m[1],p=Object(a.useState)(!0),g=Object(i.a)(p,2),k=g[0],y=g[1];return Object(a.useEffect)((function(){o([])}),[e]),Object(a.useEffect)((function(){return h(!0),x(!1),b()({method:"GET",url:"http://openlibrary.org/search.json",params:{q:e,page:t},cancelToken:new b.a.CancelToken((function(e){return c=e}))}).then((function(e){console.log(e.data.docs),h(!1),o((function(t){return Object(j.a)(new Set([].concat(Object(j.a)(t),Object(j.a)(e.data.docs))))})),y(e.data.docs.length>0)})).catch((function(e){b.a.isCancel(e)||(x(!0),h(!1))})),function(){return c()}}),[e,t]),{books:s,loading:d,error:f,hasMore:k}}(c,l),k=g.books,y=g.loading,N=g.error,v=g.hasMore,S=Object(a.useRef)(),_=Object(a.useCallback)((function(e){y||(S.current&&S.current.disconnect(),S.current=new IntersectionObserver((function(e){e[0].isIntersecting&&v&&u((function(e){return e+1}))})),e&&S.current.observe(e))}),[y,v]);return Object(n.jsxs)(n.Fragment,{children:[Object(n.jsx)(h.a,{fluid:!0,className:"bg-warning",children:Object(n.jsx)(h.a,{className:"p-5",children:Object(n.jsx)(O.a,{children:Object(n.jsx)(O.a.Group,{children:Object(n.jsx)(O.a.Control,{className:"rounded",size:"lg",type:"text",placeholder:"Search Books",value:c,onChange:function(e){r(e.target.value),u(1)}})})})})}),Object(n.jsx)(h.a,{fluid:!0,className:"bg-info",style:{minHeight:"100vh"},children:Object(n.jsxs)(h.a,{className:"p-5",children:[Object(n.jsx)(m.a,{children:k&&k.map((function(e,t){return t===k.length-1?Object(n.jsx)(f.a,{className:"p-2",xs:12,sm:6,md:4,ref:_,children:Object(n.jsx)(p,{id:e.edition_key&&e.edition_key[0],title:e.title,authorName:e.author_name&&e.author_name[0],elementRef:_()})},"book-".concat(Math.random())):Object(n.jsx)(f.a,{className:"p-2",xs:12,sm:6,md:4,children:Object(n.jsx)(p,{id:e.edition_key&&e.edition_key[0],authorName:e.author_name&&e.author_name[0],title:e.title})},"book-".concat(Math.random()))}))}),y&&Object(n.jsx)(m.a,{children:Array(3).fill("").map((function(e){return Object(n.jsx)(f.a,{className:"p-2",sm:12,md:4,ref:_,children:Object(n.jsxs)(x.a,{children:[Object(n.jsx)(d.a,{height:150}),Object(n.jsx)(x.a.Body,{children:Object(n.jsx)(d.a,{})})]})},"skeleton-".concat(Math.random()))}))}),N&&Object(n.jsx)("p",{children:"Error"})]})})]})}o.a.render(Object(n.jsx)(r.a.StrictMode,{children:Object(n.jsx)(g,{})}),document.getElementById("root"))}},[[61,1,2]]]);
//# sourceMappingURL=main.c721f109.chunk.js.map